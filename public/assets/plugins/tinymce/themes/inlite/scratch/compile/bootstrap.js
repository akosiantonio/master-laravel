!function(e){var n=e.ephox=e.ephox||{},t=n.bolt=n.bolt||{},r=function(e,n){return n.apply(null,e)},o=t.kernel=t.kernel||{};o.api=o.api||{},o.async=o.api||{},o.fp=o.fp||{},o.modulator=o.modulator||{},o.module=o.module||{},o.fp.array=r([],function(){var e=function(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;++t)if(e[t]!==n[t])return!1;return!0},n=function(e,n){for(var t=n||function(e){return e===!0},r=0;r<e.length;++r)if(t(e[r])!==!0)return!1;return!0},t=function(e,n){for(var t=[],r=0;r<e.length;++r)t.push(n(e[r],r));return t},r=function(e){for(var n=[],t=0;t<e.length;++t)n=n.concat(e[t]);return n},o=function(e,n){return r(t(e,n))},a=function(e,n){for(var t=[],r=0;r<e.length;++r)n(e[r])&&t.push(e[r]);return t},u=t,i=function(e,t){return!n(e,function(e){return e!==t})},c=function(e,n){for(var t=0;t<e.length;++t)if(e[t]===n)return t;return-1};return{equals:e,forall:n,map:t,flatten:r,flatmap:o,filter:a,each:u,contains:i,indexof:c}}),o.fp.object=r([],function(){var e=function(e,n){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n(r,e[r]));return t},n=e,t=function(e,t){n(t,function(n,t){e[n]=t})},r=function(e){var t=[];return n(e,function(e){t.push(e)}),t};return{each:n,keys:r,map:e,merge:t}}),o.fp.functions=r([],function(){var e=function(e){var n=Array.prototype.slice,t=n.call(arguments,1);return function(){var r=t.concat(n.call(arguments,0));return e.apply(null,r)}},n=function(e){return function(){var n=Array.prototype.slice;return!e.apply(null,n.call(arguments,0))}},t=function(e){var n=Array.prototype.slice;return e.apply(null,n.call(arguments,0))};return{curry:e,not:n,apply:t}}),o.async.map=r([o.fp.array],function(e){var n=function(n,t,r){var o=n.length,a=0,u=[];e.each(n,function(e,n){t(e,function(e){++a,u[n]=e,a===o&&r(u)})})};return{amap:n}}),o.async.piggybacker=r([o.fp.array,o.fp.functions],function(e,n){var t=function(){var t={},r=function(r){var o=t[r];delete t[r],e.each(o,n.apply)},o=function(e,o,a){void 0===t[e]?(t[e]=[a],o(n.curry(r,e))):t[e].push(a)};return{piggyback:o}};return{create:t}}),o.modulator.globalator=r([],function(){var e=function(){var e=function(e,n){for(var t=e.split("."),r=n,o=0;o<t.length&&void 0!==r;++o)r=r[t[o]];return r},n=Function("return this")(),t=function(e){return 0===e.indexOf("global!")},r=function(t,r,o){var a=t.substring("global!".length),u=function(o,u){var i=e(a,n);void 0!==i?(r(t,[],function(){return i}),o()):u("Modulator error: could not resolve global ["+a+"]")};return{url:t,load:u,serial:!0}};return{can:t,get:r}};return{create:e}}),o.modulator.bolt=r([o.fp.functions],function(e){var n=function(n,t,r,o,a,u){var i=function(e){return e===r||0===e.indexOf(r+".")||0===e.indexOf(r+"/")},c=function(r){var i=void 0!==u&&u.absolute===!0?o:t(o),c=void 0!==u&&u.fresh===!0?"?cachebuster="+(new Date).getTime():"",l=i+"/"+a(r)+".js"+c,f=e.curry(n.load,l);return{url:l,load:f,serial:!1}};return{can:i,get:c}};return{create:n}}),o.module.stratifier=r([o.fp.array],function(e){var n=function(n){var t=e.filter(n,function(e){return!e.serial});return t.length>0?t:n.slice(0,1)};return{stratify:n}}),o.module.analyser=r([o.fp.array],function(e){var n=function(n,t){var r=e.indexof(n,t),o=n.slice(r);return o.concat([t])},t=function(t,r){var o,a={},u=[],i=[],c=function(n){e.each(r[n],s)},l=function(e){r[e]?c(e):i.push(e)},f=function(e){u.push(e),l(e),u.pop()},d=function(t){e.contains(u,t)?o=n(u,t):f(t)},s=function(e){a[e]||(d(e),a[e]=!0)};return e.each(t,s),o?{cycle:o}:{load:i}};return{analyse:t}}),o.module.fetcher=r([o.fp.array,o.fp.functions,o.async.map,o.async.piggybacker,o.module.stratifier],function(e,n,t,r,o){var a=function(a,u,i,c,l,f){var d=r.create(),s=function(t,r){var o=e.filter(r,n.not(u));o.length>0?i("Fetcher error: modules were not defined: "+o.join(", ")):t()},m=function(e,t){var r=n.curry(t,e.id),o=function(n){e.load(n,i)};d.piggyback(e.url,o,r)},p=function(e,r){var a=n.curry(s,r),u=o.stratify(e);t.amap(u,m,a)},v=function(e,n){a.regulate(e,c,l,f,function(e){p(e,n)},i)};return{fetch:v}};return{create:a}}),o.module.loader=r([o.module.analyser],function(e){var n=function(n,t,r,o,a,u){var i=e.analyse(n,t);i.cycle?u("Dependency error: a circular module dependency exists from "+i.cycle.join(" ~> ")):0===i.load.length?a():r.fetch(i.load,o)};return{load:n}}),o.module.manager=r([o.fp.array,o.fp.object,o.module.loader,o.module.fetcher],function(e,n,t,r){var o=function(o,a){var u={},i={},c=function(e,n,t){void 0===e?a("Define error: module id can not be undefined"):void 0!==u[e]?a("Define error: module '"+e+"' is already defined"):u[e]={id:e,dependencies:n,definition:t}},l=function(r,o){var i=function(){var n=e.map(r,f);o.apply(null,n)},c=function(){var e=n.map(u,function(e,n){return n.dependencies});t.load(r,e,m,c,i,a)};c()},f=function(e){if(void 0!==i[e])return i[e];if(void 0===u[e])throw"module '"+e+"' is not defined";var n=d(e);if(void 0===n)throw"module '"+e+"' returned undefined from definition function";return i[e]=n,n},d=function(n){var t=u[n],r=e.map(t.dependencies,f);return t.definition.apply(null,r)},s=function(e){return void 0!==u[e]},m=r.create(o,s,a,c,l,f);return{define:c,require:l,demand:f}};return{create:o}}),o.api.sources=r([o.fp.array,o.fp.object,o.modulator.globalator],function(e,n,t){var r=function(r,o){var a={global:{instance:t}};n.each(r,function(e,n){a[e]={instance:n}}),e.each(o.types,function(e){a[e.type]={id:e.modulator}});var u=o.sources.slice(0),i=[t.create()],c=function(e){if(void 0===a[e])throw"Unknown modulator type ["+e+"]."},l=function(e){return c(e),void 0!==a[e].instance},f=function(e){return c(e),a[e].id},d=function(e){return c(e),a[e].instance},s=function(e,n){c(e),a[e].instance=n},m=function(e){for(var n=0;n<i.length;++n)if(i[n].can(e))return{found:i[n]};return{notfound:!0}},p=function(){var n=[];e.each(u,function(e){if(l(e.type)){var t=d(e.type),r=t.create.apply(null,e.args);i.push(r)}else n.push(e)}),u=n};return{isResolved:l,idOf:f,instanceOf:d,register:s,find:m,crank:p}};return{create:r}}),o.api.regulator=r([o.fp.array,o.fp.functions],function(e,n){var t=function(t){var r=function(r,a,c,l,f,d){t.crank();var s=e.map(r,i),m=e.filter(s,n.not(t.isResolved));0===m.length?o(r,a,c,l,f,d):u(m,r,a,c,l,f,d)},o=function(e,n,r,o,u,i){for(var c=[],l=0;l<e.length;++l){var f=e[l],d=t.find(f);if(d.notfound)return void i("Could not find source for module ["+f+"]");var s=d.found.get(f,n,r,o);c[l]=a(f,s)}u(c)},a=function(e,n){return{id:e,url:n.url,load:n.load,serial:n.serial}},u=function(n,o,a,u,i,c,l){var f=e.map(n,t.idOf);u(f,function(){var f=arguments;e.each(n,function(e,n){t.register(e,f[n])}),r(o,a,u,i,c,l)})},i=function(e){var n=e.indexOf("!");return-1===n?"bolt":e.substring(0,n)};return{regulate:r}};return{create:t}}),o.api.config=r([o.module.manager,o.api.regulator,o.api.sources],function(e,n,t){var r=function(r,o,a){var u=t.create(o,r),i=n.create(u),c=e.create(i,a);return{define:c.define,require:c.require,demand:c.demand}};return{configure:r}})}(Function("return this")()),function(scope){var ephox=scope.ephox=scope.ephox||{},bolt=ephox.bolt=ephox.bolt||{},def=function(e,n){return n.apply(null,e)},loader=bolt.loader=bolt.loader||{};loader.executor=loader.executor||{},loader.api=loader.api||{},loader.transporter=loader.transporter||{},loader.tag=loader.tag||{},loader.tag.script=def([],function(){var e=function(e){return function(n){("loaded"===n.srcElement.readyState||"complete"===n.srcElement.readyState)&&e()}},n=function(e){return e.attachEvent&&!window.opera},t=function(t,r){n(t)?t.attachEvent("onreadystatechange",e(r)):t.addEventListener("load",r,!1)},r=function(e){var n=document.createElement("script");return n.type="text/javascript",t(n,e),n},o=function(e,n){var t=r(n);e(t);var o=document.getElementsByTagName("head")[0];o.appendChild(t)};return{insert:o}}),loader.transporter.commonjs=def([],function(){var e=function(e,n,t){var r=require("fs");r.exists(e,function(o){o?r.readFile(e,"UTF-8",function(r,o){r?t("Error reading file ["+e+"], error ["+r+"]"):n(o)}):t("File does not exist ["+e+"]")})};return{read:e}}),loader.transporter.xhr=def([],function(){var e=function(){var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return n(e)},n=function(e){for(var n=0;n<e.length;++n)try{return e[n]()}catch(t){}},t=function(e,n,t,o){return function(){4===e.readyState&&r(e,n,t,o)}},r=function(e,n,t,r){200===e.status||304===e.status?t(e.responseText):r("Transport error: "+e.status+" "+e.statusText+' for resource: "'+n+'"')},o=function(e,n,r,o){e.open("GET",n,!0),e.onreadystatechange=t(e,n,r,o),e.send()},a=function(n,t,r){var a=e();a?o(a,n,t,r):r("Transport error: browser does not support XMLHttpRequest.")};return{request:a}}),loader.executor.evaller=def([],function(){var execute=function(data,onsuccess,onfailure){try{eval(data)}catch(e){return void onfailure(e)}onsuccess()};return{execute:execute}}),loader.executor.injector=def([loader.tag.script],function(e){var n=function(n,t,r){var o=function(e){e.text=n},a=function(){};e.insert(o,a),t()};return{execute:n}}),loader.api.commonjsevaller=def([loader.transporter.commonjs,loader.executor.evaller],function(e,n){var t=function(t,r,o){var a=function(e){n.execute(e,r,o)};e.read(t,a,o)};return{load:t}}),loader.api.scripttag=def([loader.tag.script],function(e){var n=function(n,t,r){var o=function(e){e.src=n};e.insert(o,t)};return{load:n}}),loader.api.xhrevaller=def([loader.transporter.xhr,loader.executor.evaller],function(e,n){var t=function(t,r,o){var a=function(e){n.execute(e,r,o)};e.request(t,a,o)};return{load:t}}),loader.api.xhrinjector=def([loader.transporter.xhr,loader.executor.injector],function(e,n){var t=function(t,r,o){var a=function(e){n.execute(e,r)};e.request(t,a,o)};return{load:t}})}(Function("return this")()),function(scope){var ephox=scope.ephox=scope.ephox||{},bolt=ephox.bolt=ephox.bolt||{},def=function(e,n){return n.apply(null,e)},module=bolt.module=bolt.module||{};module.bootstrap=module.bootstrap||{},module.config=module.config||{},module.error=module.error||{},module.modulator=module.modulator||{},module.reader=module.reader||{},module.runtime=module.runtime||{},module.util=module.util||{},module.error.error=def([],function(){var e=function(e){throw e||new Error("unknown error")};return{die:e}}),module.config.mapper=def([],function(){var e=function(e){return e},n=function(e){return e.replace(/\./g,"/")},t=function(e){return function(){return e}};return{flat:e,hierarchical:n,constant:t}}),module.api=def([module.runtime],function(e){var n=function(n){return function(){return e[n].apply(null,arguments)}};return{define:n("define"),require:n("require"),demand:n("demand"),main:n("main"),load:n("load"),loadscript:n("loadscript")}}),module.util.path=def([],function(){var e=function(e){var n=e.replace(/\\/g,"/"),t=n.lastIndexOf("/");return n.substring(0,t)},n=function(e){var n=e.replace(/\\/g,"/"),t=n.lastIndexOf("/");return n.substring(t+1)};return{basename:n,dirname:e}}),module.util.locator=def([],function(){var e=function(){var e=document.getElementsByTagName("script");return e[e.length-1].src},n=module.runtime.locate,t=function(){var t=n||e;return t()};return{locate:t}}),module.util.pather=def([module.util.path],function(e){var n=function(n){var t=e.dirname(n);return function(e){return t+"/"+e}};return{create:n}}),module.modulator.modulators=def([ephox.bolt.kernel.fp.functions,ephox.bolt.kernel.modulator.bolt,ephox.bolt.loader.api.commonjsevaller,ephox.bolt.loader.api.scripttag,ephox.bolt.loader.api.xhrevaller,ephox.bolt.loader.api.xhrinjector],function(e,n,t,r,o,a){var u=function(n,t){var r=e.curry(n.create,t);return{create:r}};return{boltcommonjs:u(n,t),boltscripttag:u(n,r),boltxhreval:u(n,o),boltxhrinjector:u(n,a)}}),module.config.builtins=def([ephox.bolt.module.modulator.modulators.boltscripttag,ephox.bolt.module.modulator.modulators.boltcommonjs],function(e,n){return{browser:{bolt:e,amd:e},commonjs:{bolt:n,amd:n}}}),module.config.specs=def([module.util.pather],function(e){var n=function(e,n){return{type:e,implementation:n,modulator:n+".Modulator",compiler:n+".Compiler"}},t=function(n){return function(t){return{type:t,relativeto:n,args:[e.create(n)].concat(Array.prototype.slice.call(arguments,1))}}};return{type:n,source:t}}),module.reader.bouncing=def([ephox.bolt.kernel.fp.array,module.error.error,module.config.specs],function(ar,error,specs){var bounce=function(e,n,t){var r=t.configs.shift();n(r.relativeto,r.config,e,t)},tick=function(e,n,t,r,o){var a=ar.map(n.configs||[],function(n){return{relativeto:e,config:n}}),u={sources:o.sources.concat(n.sources||[]),types:o.types.concat(n.types||[]),configs:a.concat(o.configs)};u.configs.length>0?bounce(t,r,u):t({sources:u.sources,types:u.types})},evaluate=function(file,payload,done,read,acc){var result={},mapper=module.config.mapper,type=specs.type,source=specs.source(file),configure=function(e){result=e};try{eval(payload)}catch(e){throw"Could not load configuration ["+file+"], with: "+e}tick(file,result,done,read,acc)};return{evaluate:evaluate}}),module.reader.browser=def([module.error.error,module.reader.bouncing,module.util.path,ephox.bolt.loader.transporter.xhr],function(e,n,t,r){var o=function(a,u,i,c){var l=c||{sources:[],types:[],configs:[]},f=t.dirname(a),d=f+"/"+u;r.request(d,function(e){n.evaluate(d,e,i,o,l)},e.die)};return{read:o}}),module.reader.node=def([module.reader.bouncing],function(e,n,t){var r=function(n,t,o,a){var u=require("fs"),i=require("path"),c=a||{sources:[],types:[],configs:[]},l=i.dirname(n),f=i.resolve(l,t),d=u.readFileSync(f,"UTF-8");e.evaluate(f,d,o,r,c)};return{read:r}}),module.reader.direct=def([],function(){var e=function(e){return function(n){n({sources:e.sources||[],types:e.types||[],configs:e.configs||[]})}};return{create:e}}),module.bootstrap.configloader=def([module.util.locator,module.reader.browser],function(e,n){var t=function(t){var r=e.locate();return function(e){n.read(r,t,e)}};return{create:t}}),module.bootstrap.deferred=def([ephox.bolt.kernel.fp.array],function(e){var n=[],t=function(e,t){var r=function(n){n(e,t)};n.push(r)},r=function(t){e.each(n,function(e){e(t)}),n=[]};return{require:t,configured:r}}),module.bootstrap.main=def([ephox.bolt.kernel.api.config,module.bootstrap.deferred,module.runtime],function(e,n,t){var r=function(e,n,r,o){t.require(r||[],function(){o&&o.apply(null,arguments),t.require([e],function(e){e.apply(null,n||[])})})};return{main:r}}),module.bootstrap.install=def([ephox.bolt.kernel.api.config,module.bootstrap.deferred,module.bootstrap.main,module.runtime,module.error.error],function(e,n,t,r,o){var a=function(){throw"bolt not initialised, can not call define or demand, did you mean to use require or main?"},u=function(u,i,c,l){r.define=a,r.demand=a,r.require=n.require,r.main=t.main,r.load=c,r.loadscript=l,u(function(t){var a=e.configure(t,i,o.die);r.define=a.define,r.require=a.require,r.demand=a.demand,n.configured(r.require)})};return{install:u}})}(Function("return this")()),function(){var e=ephox.bolt.module.bootstrap.install,n=ephox.bolt.module.config.builtins.browser,t=ephox.bolt.loader.transporter.xhr.request,r=ephox.bolt.loader.api.scripttag.load,o=ephox.bolt.module.reader.direct,a=ephox.bolt.module.config.mapper,u=ephox.bolt.module.util.locator,i=ephox.bolt.module.config.specs.source(u.locate()),c=o.create({sources:[i("bolt","tinymce/inlite/Theme",".",a.constant("theme")),i("bolt","global!tinymce.ThemeManager",".",a.constant("theme")),i("bolt","global!tinymce.util.Delay",".",a.constant("theme")),i("bolt","tinymce/inlite/ui/Panel",".",a.constant("theme")),i("bolt","tinymce/inlite/ui/Buttons",".",a.constant("theme")),i("bolt","tinymce/inlite/core/SkinLoader",".",a.constant("theme")),i("bolt","tinymce/inlite/core/SelectionMatcher",".",a.constant("theme")),i("bolt","tinymce/inlite/core/ElementMatcher",".",a.constant("theme")),i("bolt","tinymce/inlite/core/Matcher",".",a.constant("theme")),i("bolt","tinymce/inlite/alien/Arr",".",a.constant("theme")),i("bolt","tinymce/inlite/core/PredicateId",".",a.constant("theme")),i("bolt","global!tinymce.util.Tools",".",a.constant("theme")),i("bolt","global!tinymce.ui.Factory",".",a.constant("theme")),i("bolt","global!tinymce.DOM",".",a.constant("theme")),i("bolt","tinymce/inlite/ui/Toolbar",".",a.constant("theme")),i("bolt","tinymce/inlite/ui/Forms",".",a.constant("theme")),i("bolt","tinymce/inlite/core/Measure",".",a.constant("theme")),i("bolt","tinymce/inlite/core/Layout",".",a.constant("theme")),i("bolt","tinymce/inlite/file/Conversions",".",a.constant("theme")),i("bolt","tinymce/inlite/file/Picker",".",a.constant("theme")),i("bolt","tinymce/inlite/core/Actions",".",a.constant("theme")),i("bolt","global!tinymce.EditorManager",".",a.constant("theme")),i("bolt","global!tinymce.util.Promise",".",a.constant("theme")),i("bolt","tinymce/inlite/alien/Uuid",".",a.constant("theme")),i("bolt","tinymce/inlite/alien/Unlink",".",a.constant("theme")),i("bolt","tinymce/inlite/core/UrlType",".",a.constant("theme")),i("bolt","global!tinymce.geom.Rect",".",a.constant("theme")),i("bolt","tinymce/inlite/core/Convert",".",a.constant("theme")),i("bolt","tinymce/inlite/alien/Bookmark",".",a.constant("theme")),i("bolt","global!tinymce.dom.TreeWalker",".",a.constant("theme")),i("bolt","global!tinymce.dom.RangeUtils",".",a.constant("theme"))]});e.install(c,n,t,r)}();