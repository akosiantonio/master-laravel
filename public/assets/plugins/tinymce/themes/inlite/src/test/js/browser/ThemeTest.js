asynctest("browser/core/ThemeTest",["ephox.mcagar.api.TinyLoader","ephox.mcagar.api.TinyApis","ephox.mcagar.api.TinyActions","ephox.mcagar.api.TinyDom","tinymce/inlite/Theme","ephox.agar.api.Pipeline","ephox.agar.api.Chain","ephox.agar.api.UiFinder","ephox.agar.api.Mouse","ephox.agar.api.GeneralSteps","ephox.agar.api.UiControls","ephox.agar.api.FocusTools"],function(e,t,n,a,i,r,o,s,p,c,u,l){var m=arguments[arguments.length-2],h=arguments[arguments.length-1],d=a.fromDom(document.body),f=o.fromChainsWith(d,[s.cWaitForState("label",".mce-tinymce-inline",function(e){return""===e.dom().style.display})]),g=function(e){return o.fromChains([s.cFindIn('div[aria-label="'+e+'"]'),p.cTrueClick])},S=o.asStep(a.fromDom(document),[l.cGetFocused,p.cTrueClick]),b=function(e){return o.asStep({},[f,g(e)])},C=function(){return o.asStep({},[f])},w=function(e){return c.sequence([e.sSetContent("<p>a</p>"),e.sSetSelection([0,0],0,[0,0],1),b("Bold"),e.sAssertContent("<p><strong>a</strong></p>")])},x=function(e){return c.sequence([e.sSetContent("<p>a</p>"),e.sSetSelection([0,0],0,[0,0],1),b("Heading 2"),e.sAssertContent("<h2>a</h2>")])},y=function(e){return o.asStep({},[f,g("Insert/Edit link"),f,s.cFindIn("input"),u.cSetValue(e),f,g("Ok")])},k=o.fromChainsWith(d,[s.cWaitForState("window element",".mce-window",function(){return!0})]),q=function(e){return o.fromChains([s.cFindIn('button:contains("'+e+'")'),p.cTrueClick])},T=function(e){return o.asStep({},[k,q(e)])},F=function(e,t){return c.sequence([y(e),T(t)])},A=o.asStep({},[f,g("Insert/Edit link"),f,g("Remove link")]),I=function(e){var t=function(t,n,a,i,r,o,s){return c.sequence([e.sSetContent(t),e.sSetSelection(n,a,i,r),s,e.sAssertContent(o)])},n=function(e,n,a,i,r,o,s){return t(e,n,a,i,r,s,y(o))},a=function(e,n,a,i,r,o){return t(e,n,a,i,r,o,A)},i=function(e,n,a,i,r,o,s){return t(e,n,a,i,r,s,F(o,"Ok"))},r=function(e,n,a,i,r,o,s){return t(e,n,a,i,r,s,F(o,"Cancel"))};return c.sequence([i("<p>a</p>",[0,0],0,[0,0],1,"www.site.com",'<p><a href="http://www.site.com">a</a></p>'),r("<p>a</p>",[0,0],0,[0,0],1,"www.site.com",'<p><a href="www.site.com">a</a></p>'),n("<p>a</p>",[0,0],0,[0,0],1,"#1",'<p><a href="#1">a</a></p>'),n('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,"#2",'<p><a id="x" href="#2">a</a></p>'),n('<p><a href="#3">a</a></p>',[0,0,0],0,[0,0,0],1,"","<p>a</p>"),a('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,"<p>a</p>")])},v=function(e){return c.sequence([e.sSetContent("<p><br></p><p>b</p>"),e.sSetCursor([0],0),b("Insert table"),e.sAssertContent(['<table style="width: 100%;">',"<tbody>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","</tbody>","</table>","<p>b</p>"].join("\n"))])},W=function(e,t){return c.sequence([e.sSetContent("<p>a</p>"),e.sSetSelection([0,0],0,[0,0],1),C(),t.sContentKeydown(121,{alt:!0}),S,e.sAssertContent("<p><strong>a</strong></p>")])};e.setup(function(e,a,i){var o=t(e),s=n(e);r.async({},[w(o),x(o),I(o),v(o),W(o,s)],a,i)},{theme:"inlite",plugins:"image table link paste contextmenu textpattern",insert_toolbar:"quickimage media quicktable",selection_toolbar:"bold italic | quicklink h1 h2 blockquote",inline:!0},m,h)});