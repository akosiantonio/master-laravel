asynctest("browser/core/ActionsTest",["ephox.mcagar.api.TinyLoader","ephox.mcagar.api.TinyApis","tinymce/inlite/core/Actions","ephox.agar.api.Pipeline","ephox.agar.api.Step","ephox.agar.api.GeneralSteps"],function(e,t,n,a,r,s){var p=arguments[arguments.length-2],o=arguments[arguments.length-1],u=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return r.sync(function(){e.apply(null,[].concat(t).concat(n))})}},i=function(e,t){var a=function(a,r,p,o){var i=u(n.insertTable,e);return s.sequence([t.sSetContent(""),i(a,r),t.sAssertContent(p,o)])};return s.sequence([a(2,3,['<table style="width: 100%;">',"<tbody>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","</tbody>","</table>"].join("\n"),"Should be a 2x3 table"),a(3,2,['<table style="width: 100%;">',"<tbody>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","</tbody>","</table>"].join("\n"),"Should be a 3x2 table")])},c=function(e,t){var a=function(a){var r=u(n.formatBlock,e);return s.sequence([t.sSetContent("<p>a</p>"),t.sSetCursor([0],0),r(a),t.sAssertContent("<"+a+">a</"+a+">","Should be a "+a+" block")])};return s.sequence([a("h1"),a("h2"),a("pre")])},l=function(e,t){var a=function(a,r,p,o,i,c,l){var A=u(n.createLink,e);return s.sequence([t.sSetContent(a),t.sSetSelection(p,o,i,c),A(r),t.sAssertContent(l,"Should have a link")])};return s.sequence([a("<p>a</p>","#1",[0,0],0,[0,0],1,'<p><a href="#1">a</a></p>'),a('<p><a href="#1">a</a></p>',"#2",[0,0],0,[0,0],1,'<p><a href="#2">a</a></p>'),a('<p><a href="#1"><em>a</em></a></p>',"#2",[0,0,0],0,[0,0,0],1,'<p><a href="#2"><em>a</em></a></p>')])},A=function(e,t){var a=function(a,r,p,o,i,c){var l=u(n.unlink,e);return s.sequence([t.sSetContent(a),t.sSetSelection(r,p,o,i),l(),t.sAssertContent(c,"Should not have a link")])};return s.sequence([a("<p>a</p>",[0,0],0,[0,0],1,"<p>a</p>"),a('<p><a href="#">a</a></p>',[0,0,0],0,[0,0,0],1,"<p>a</p>"),a('<p><a href="#"><em>a</em></a></p>',[0,0,0],0,[0,0,0],1,"<p><em>a</em></p>"),a('<p><a href="#">a</a>b</p>',[0,0,0],0,[0,1],1,"<p>ab</p>")])},d=function(e,t){for(var n=atob(e),a=new Uint8Array(n.length),r=0;r<a.length;r++)a[r]=n.charCodeAt(r);return new Blob([a],{type:t})},b=function(e,t){var a=function(a,r,p,o,i,c){var l=u(n.insertBlob,e);return s.sequence([t.sSetContent(a),t.sSetCursor(r,p),l(o,i),t.sAssertContent(c,"Should have a image")])},r="R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",p=d(r,"image/gif");return s.sequence([a("<p>a</p>",[0,0],0,r,p,'<p><img src="data:image/gif;base64,'+r+'" />a</p>')])};e.setup(function(e,n,r){var s=t(e);a.async({},[i(e,s),c(e,s),b(e,s),l(e,s),A(e,s)],n,r)},{inline:!0},p,o)});